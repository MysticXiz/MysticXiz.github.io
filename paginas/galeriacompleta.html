<!DOCTYPE html>
<html lang='pt-br'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>Galeria</title>
<link rel='stylesheet' href='/style/style.css'>
</head>
<body>
    <main>
        <section class="secaoCardCompleto">
            <div class="containertitulo"><button class="botaoVoltar" onclick="window.location.href = 'galeria.html'"><span class="arrowLeft">&#10140;</span></button><h1>
            </h1>
        </div>
        </section>
    </main>
<script src="/script/elementos.js"></script>
<script>

const parametrosURL = new URLSearchParams(window.location.search);
const url = parametrosURL.get('url');
const titulo = parametrosURL.get('titulo')
document.querySelector('.secaoCardCompleto h1').innerHTML = titulo

fetch(url)
.then(response => response.json())
.then(dados => {
    console.log(dados);
    dados.forEach(function(element){
    criarCards(element.images.lg, element.name)
 })
})
.catch(error => {
    console.error(`Erro obtendo dados de ${url}:`, error);
});
setTimeout(() => {
    document.querySelector('.secaoCardCompleto').classList.add('opacidade')
}, 1);

function criarCards(imgUrl, cardTitulo) {
    const a = document.createElement('a');
    const card = document.createElement('div');
    const cardImg = document.createElement('img');
    const titulo = document.createElement('p');

    a.className = 'cardLink';
    a.addEventListener('click', () => criarPopup(imgUrl, cardTitulo));

    card.className = 'cardCompleto';

    cardImg.className = 'cardImagem';
    cardImg.src = imgUrl;

    titulo.className = 'cardTexto';
    titulo.innerHTML = cardTitulo;

    card.appendChild(a);
    card.appendChild(cardImg);
    card.appendChild(titulo);
    document.querySelector('.secaoCardCompleto').appendChild(card);
}
function criarPopup(imgUrl, cardTitulo) {
            let popupcontainer = document.querySelector('.popupcontainer');
            if (!popupcontainer) {
                popupcontainer = document.createElement('div');
                popupcontainer.className = 'popupcontainer';
                document.body.appendChild(popupcontainer);
            }
            const cardPopUp = document.createElement('div');
            cardPopUp.className = 'cardPopUp';

            const imgPopup = document.createElement('img');
            imgPopup.className = 'imgPopup';
            imgPopup.src = imgUrl;

            const tituloPopup = document.createElement('h1');
            tituloPopup.className = 'tituloPopup';
            tituloPopup.innerHTML = cardTitulo;

            const descricaoPopup = document.createElement('p');
            descricaoPopup.className = 'descricaoPopup';
            descricaoPopup.innerHTML = '';

            const fecharPopup = document.createElement('button');
            fecharPopup.className = 'fecharPopup';
            fecharPopup.innerHTML = '&#10005;';
            fecharPopup.addEventListener('click', abrirfecharPopUp);

            cardPopUp.appendChild(imgPopup);
            cardPopUp.appendChild(tituloPopup);
            cardPopUp.appendChild(descricaoPopup);
            cardPopUp.appendChild(fecharPopup);

            popupcontainer.innerHTML = ''; // Limpar conteÃºdo anterior
            popupcontainer.appendChild(cardPopUp);
            setTimeout(() => {
                abrirfecharPopUp()
            }, 1);
        }
function abrirfecharPopUp(){
    const popup = document.querySelector('.popupcontainer');
    popup.classList.toggle('active');
}


</script>
</body>
</html>